---
import MainLayout from '@/layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { textsymbolsCategories } from '@/utils/coolSymbols';

export function getStaticPaths() {
  return [
    { params: { lang: 'es' } },
    { params: { lang: 'fr' } },
    { params: { lang: 'de' } },
    { params: { lang: 'pt' } },
    { params: { lang: 'ru' } },
    { params: { lang: 'it' } },
    { params: { lang: 'id' } },
    { params: { lang: 'nl' } },
  ];
}
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
export const prerender = true;
---

<MainLayout
  title={t('symbols.title')}
  description={t('symbols.desc')}
>
  <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <h1 class="text-3xl font-bold text-center py-4">{t('symbols.heading')}</h1>
    <p class="text-md text-gray-600 md:text-lg text-center">{t('symbols.subheading')}</p>

    {
      textsymbolsCategories.map((category) => (
        <section class="category">
          <h2 class="text-2xl font-bold pt-8 pb-0">{category.title}</h2>
          <div class="symbol-grid">
            {category.symbols.map((symbol) => (
              <button class="symbol-card" data-symbol={symbol.char}>
                <span class="symbol">{symbol.char}</span>
                <span class="name">{symbol.name}</span>
              </button>
            ))}
          </div>
        </section>
      ))
    }
  </div>
</MainLayout>

<script>
  document.querySelectorAll(".symbol-card").forEach((button) => {
    button.addEventListener("click", async () => {
      const symbol = button.getAttribute("data-symbol");
      if (symbol) {
        await navigator.clipboard.writeText(symbol);
        const originalText = button.querySelector(".name").textContent;
        button.querySelector(".name").textContent = "Copied!";
        setTimeout(() => {
          button.querySelector(".name").textContent = originalText;
        }, 1000);
      }
    });
  });
</script>

<style>
  .category {
    margin-bottom: 2rem;
  }
  h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: rgb(var(--accent-light));
  }
  .symbol-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 1rem;
  }
  .symbol-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    background-color: #23262d;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    cursor: pointer;
    transition:
      transform 0.2s,
      background-color 0.2s;
    color: white;
  }
  .symbol-card:hover {
    transform: translateY(-2px);
    background-color: #2a2d34;
  }
  .symbol {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }
  .name {
    font-size: 0.8rem;
    text-align: center;
    opacity: 0.8;
  }
</style>
